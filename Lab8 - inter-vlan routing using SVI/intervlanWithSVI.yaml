L3SW1_CoreSwitch

configure terminal
hostname L3SW1_CoreSwitch


vlan 40
name Finance

vlan 50
name IT

vlan 60
name Sales

exit

spanning-tree mode rapid-pvst
spanning-tree vlan 40 priority 0
spanning-tree vlan 50 priority 0
spanning-tree vlan 60 priority 0

interface G 0/0
no switchport
description MGMTwithAnsible
no shutdown
ip address 192.168.101.3 255.255.255.0

interface range G 0/1-2
shutdown
channel-group 1 mode active
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 40,50,60
switchport nonegotiate
no shutdown

interface range G 1/0-1
shutdown
channel-group 2 mode active
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 40,50,60
switchport nonegotiate
no shutdown


interface range G 1/2-3
shutdown
channel-group 3 mode active
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 40,50,60
switchport nonegotiate
no shutdown
exit

ip routing

interface vlan 40
ip address 192.168.40.1 255.255.255.0
no shutdown

interface vlan 50
ip address 192.168.50.1 255.255.255.0
no shutdown

interface vlan 60
ip address 192.168.60.1 255.255.255.0
no shutdown



ip dhcp pool VLAN40
network 192.168.40.0 255.255.255.0
default-router 192.168.40.1
dns-server 8.8.8.8 8.8.4.4
lease 1

ip dhcp pool VLAN50
network 192.168.50.0 255.255.255.0
default-router 192.168.50.1
dns-server 8.8.8.8 8.8.4.4
lease 1

ip dhcp pool VLAN60
network 192.168.60.0 255.255.255.0
default-router 192.168.60.1
dns-server 8.8.8.8 8.8.4.4
lease 1

exit
ip dhcp excluded-address 192.168.40.1 192.168.40.10
ip dhcp excluded-address 192.168.50.1 192.168.50.10
ip dhcp excluded-address 192.168.60.1 192.168.60.10


ip domain-name example.com
crypto key generate rsa modulus 2048
username devops privilege 15 secret devops
line vty 0 4
transport input ssh
login local
end
write memory

==============================================================================

SW2

configure terminal
hostname SW2

vlan 40
name Finance
exit

spanning-tree mode rapid-pvst


interface range G 0/1-2
shutdown
channel-group 1 mode passive
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 40
switchport nonegotiate
no shutdown

interface range G 1/0-1
switchport mode access
switchport access vlan 40
spanning-tree portfast

interface G 0/0
no switchport
description MGMTwithAnsible
no shutdown
ip address 192.168.101.4 255.255.255.0

ip domain-name example.com
crypto key generate rsa modulus 2048
username devops privilege 15 secret devops
line vty 0 4
transport input ssh
login local
end
write memory


==============================================================================

SW3

configure terminal
hostname SW3

vlan 50
name IT
exit

spanning-tree mode rapid-pvst


interface range G 0/1-2
shutdown
channel-group 1 mode passive
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 50
switchport nonegotiate
no shutdown

interface range G 1/0-1
switchport mode access
switchport access vlan 50
spanning-tree portfast

interface G 0/0
no switchport
description MGMTwithAnsible
no shutdown
ip address 192.168.101.5 255.255.255.0

ip domain-name example.com
crypto key generate rsa modulus 2048
username devops privilege 15 secret devops
line vty 0 4
transport input ssh
login local
end
write memory


==============================================================================
SW4

configure terminal
hostname SW4

vlan 60
name sales
exit

spanning-tree mode rapid-pvst


interface range G 0/1-2
shutdown
channel-group 1 mode passive
switchport trunk encapsulation dot1q
switchport mode trunk
switchport trunk allowed vlan 60
switchport nonegotiate
no shutdown

interface range G 1/0-1
switchport mode access
switchport access vlan 60
spanning-tree portfast

interface G 0/0
no switchport
description MGMTwithAnsible
no shutdown
ip address 192.168.101.6 255.255.255.0

ip domain-name example.com
crypto key generate rsa modulus 2048
username devops privilege 15 secret devops
line vty 0 4
transport input ssh
login local
end
write memory